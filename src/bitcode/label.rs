use std::sync::*;

lazy_static! {
    /// The ID to assign to the next label we create
    static ref NEXT_ID: Mutex<u64> = Mutex::new(0);
}

///
/// A label is a storage location used to keep the value of a value that's generated by
///
#[derive(Copy, Clone, PartialEq, Eq, Hash, Debug)]
pub struct Label {
    id: u64
}

impl Label {
    ///
    /// Creates a new label with a unique ID
    ///
    pub fn new() -> Label {
        // Assign an ID to this label
        let mut next_id = NEXT_ID.lock().unwrap();
        let id          = *next_id;
        (*next_id)      += 1;

        // Label is just the ID; we assign it while assembling the bitcode
        Label {
            id: id
        }
    }
}
